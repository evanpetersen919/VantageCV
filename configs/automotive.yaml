#==============================================================================
# VantageCV - Automotive Domain Configuration
#==============================================================================
# File: automotive.yaml
# Description: Configuration for autonomous vehicle perception
# Author: Evan Petersen
# Date: December 2025
#==============================================================================

domain:
  name: "automotive"
  type: "perception"
  description: "Autonomous vehicle perception and road scene understanding"

# Camera configuration
camera:
  resolution:
    width: 1920
    height: 1080
  fov: 90  # Wide angle for driving
  position:
    height: 1.2  # meters (typical sensor height)
    forward_offset: 2.0  # meters from vehicle center
  fps: 30

# Object classes for detection (COCO-aligned vehicle classification)
objects:
  classes:
    - "car"
    - "truck"
    - "bus"
    - "motorcycle"
    - "bicycle"
  
  # 3D detection settings
  include_3d_boxes: true
  include_orientation: true
  
  # COCO evaluation settings
  coco_aligned: true
  coco_category_ids:
    car: 3
    truck: 8
    bus: 6
    motorcycle: 4
    bicycle: 2

# Automotive-specific settings
automotive:
  environments:
    - "urban"
    - "highway"
    - "parking_lot"
    - "residential"
  
  weather:
    - "clear"
    - "rain"
    - "fog"
    - "night"
  
  time_of_day:
    - "dawn"
    - "noon"
    - "dusk"
    - "night"
  
  traffic:
    density: ["low", "medium", "high"]
    max_vehicles: 50
    max_pedestrians: 20
  
  randomization:
    vehicle_colors: true
    vehicle_types: true
    weather_mixing: true
    road_conditions: ["dry", "wet", "icy"]

# Lane and road annotations
road:
  include_lanes: true
  include_drivable_area: true
  include_crosswalks: true
  
  lane_types:
    - "solid_white"
    - "dashed_white"
    - "solid_yellow"
    - "double_yellow"

# Dataset generation
dataset:
  train_size: 10000
  val_size: 2000
  test_size: 1000
  
  scenario_distribution:
    urban: 0.4
    highway: 0.3
    parking_lot: 0.2
    residential: 0.1
  
  augmentation:
    enabled: true
    motion_blur: [0, 5]
    lens_distortion: true
    sun_glare: 0.1

# Annotation format
annotations:
  format: "coco"  # or "yolo", "kitti"
  include_depth: true
  include_segmentation: true
  min_object_size: 16  # pixels

#==============================================================================
# Structured Domain Randomization (SDR) - Research Grade
#==============================================================================
# Based on: Tobin et al. (2017), Tremblay et al. (2018), Kar et al. (2019)
#
# Key techniques implemented:
# - Bounding box collision detection for vehicle placement
# - Photorealistic rendering with domain gap reduction
# - Multi-view training for pose estimation robustness
# - Extreme color/lighting variation for generalization
#==============================================================================

domain_randomization:
  # Reproducibility (-1 for random seed each run)
  random_seed: -1
  
  # Ground Plane Randomization
  # Random colors force the model to focus on vehicle features
  ground_color_min: [0.1, 0.1, 0.1]   # RGB (0-1), minimum color
  ground_color_max: [0.6, 0.6, 0.6]   # RGB (0-1), maximum color
  ground_roughness_range: [0.3, 0.9]  # Material roughness
  
  # Lighting Randomization
  # Varying lighting conditions improve generalization
  sun_intensity_range: [30.0, 60.0]     # lux multiplier - softer shadows
  sun_elevation_range: [40.0, 70.0]      # degrees above horizon (strong midday sun)
  sun_azimuth_range: [0.0, 360.0]        # compass direction
  color_temperature_range: [5500.0, 6500.0]  # Kelvin (neutral to cool daylight)
  
  # Distractor Objects
  # Random geometric shapes with random colors as background noise
  distractor_enabled: true
  distractor_count_range: [3, 8]         # fewer distractors
  distractor_scale_range: [0.5, 1.5]     # larger scale (50-150 cm cubes)
  distractor_distance_range: [1000.0, 3000.0]  # 10-30 meters from camera
  distractor_random_colors: true
  distractor_random_shapes: true
  
  # Camera Randomization (Adaptive Zoom)
  # Distance adapts to vehicle count: 1 vehicle=close, 5 vehicles=far
  camera_distance_range: [2000.0, 6000.0]  # cm from scene center (20-60 meters) - adaptive
  camera_height_range: [200.0, 500.0]    # cm above ground
  camera_fov_range: [60.0, 90.0]         # field of view (degrees)
  camera_pitch_range: [-20.0, -5.0]      # look-down angle
  
  # Camera Target Selection (Professional Training Data)
  # Disabled - camera frames all vehicles, zoom adapts to vehicle count
  # 1 vehicle = close zoom, 5 vehicles = wide zoom
  camera_target_random_vehicle: false
  
  # Vehicle Position Randomization (Research-Grade)
  # Randomize vehicle positions each frame for maximum training variety
  vehicle_randomization_enabled: true
  vehicle_count_range: [1, 5]               # 1-5 vehicles, camera adapts to count
  vehicle_spawn_area: [12000.0, 12000.0]    # 120x120m area
  vehicle_min_spacing: 3000.0               # 30m grid spacing (hardcoded in C++)
  vehicle_rotation_range: [0.0, 360.0]      # random yaw rotation
  vehicle_ground_offset: 0.0                # height above ground (cm)
  vehicle_scale_range: [0.95, 1.05]         # slight scale variation for realism

#==============================================================================
# UE5 Integration Settings
#==============================================================================
ue5:
  # Remote Control API settings
  remote_control_port: 30010
  
  # Actor paths in your UE5 level (auto-discovered with _1 suffix)
  scene_controller_path: "/Game/automobile.automobile:PersistentLevel.SceneController_1"
  data_capture_path: "/Game/automobile.automobile:PersistentLevel.DataCapture_1"
  domain_randomization_path: "/Game/automobile.automobile:PersistentLevel.DomainRandomization_2"
  
  # Output settings
  output_directory: "F:/Unreal Editor/VantageCV_Project/Saved/Screenshots/VantageCV"
  default_resolution: [1920, 1080]

